tsip_session_invite.prototype=Object.create(tsip_session.prototype);tsip_event_invite.prototype=Object.create(tsip_event.prototype);tsip_session_invite.prototype.o_stream_local=null;tsip_session_invite.prototype.o_stream_remote=null;var tsip_event_invite_type_e={I_NEW_CALL:0,I_REQUEST:100,I_AO_REQUEST:101,O_ECT_TRYING:200,O_ECT_ACCEPTED:201,O_ECT_COMPLETED:202,O_ECT_FAILED:203,O_ECT_NOTIFY:204,I_ECT_REQUESTED:205,I_ECT_NEW_CALL:206,I_ECT_COMPLETED:207,I_ECT_FAILED:208,I_ECT_NOTIFY:209,M_EARLY_MEDIA:300,M_UPDATING:301,M_UPDATED:302,M_STREAM_CONNECTING:303,M_STREAM_CONNECTED:304,M_STREAM_LOCAL_REQUESTED:305,M_STREAM_LOCAL_ACCEPTED:306,M_STREAM_LOCAL_REFUSED:307,M_STREAM_LOCAL_ADDED:308,M_STREAM_LOCAL_REMOVED:309,M_STREAM_REMOTE_ADDED:310,M_STREAM_REMOTE_REMOVED:311,M_LOCAL_HOLD_OK:400,M_LOCAL_HOLD_NOK:401,M_LOCAL_RESUME_OK:402,M_LOCAL_RESUME_NOK:403,M_REMOTE_HOLD:404,M_REMOTE_RESUME:405};function tsip_session_invite(a){tsip_session.call(this,a);this.__set(Array.prototype.slice.call(arguments,1));this.o_url_local=null;this.o_url_remote=null}function tsip_event_invite(e,a,d,b,c){tsip_event.call(this,e,a,d,b,tsip_event_type_e.INVITE);this.e_invite_type=c}tsip_session_invite.prototype.get_url_local=function(){return this.o_url_local};tsip_session_invite.prototype.get_stream_local=function(){return this.o_stream_local};tsip_session_invite.prototype.get_url_remote=function(){return this.o_url_remote};tsip_session_invite.prototype.get_stream_remote=function(){return this.o_stream_remote};tsip_session_invite.prototype.__set_stream_local=function(a){if(this.o_url_local){window.nativeURL.revokeObjectURL(this.o_url_local)}this.o_stream_local=a;this.o_url_local=a?window.nativeURL.createObjectURL(a):undefined};tsip_session_invite.prototype.__set_stream_remote=function(a){if(this.o_url_remote){window.nativeURL.revokeObjectURL(this.o_url_remote)}this.o_stream_remote=a;this.o_url_remote=this.o_stream_remote?window.nativeURL.createObjectURL(this.o_stream_remote):undefined};tsip_session_invite.prototype.call=function(c){if(this.o_stack.e_state!=tsip_transport_state_e.STARTED){tsk_utils_log_error("Stack not started");return -2}var d=-1;var b=new tsip_action(tsip_action_type_e.INVITE);if(b){var a=false;b.media.e_type=c;var e=this.o_stack.o_layer_dialog.find_by_ss(this);if(!e){a=true;e=this.o_stack.o_layer_dialog.dialog_new(tsip_dialog_type_e.INVITE,this)}if((d=e.fsm_act(b.e_type,null,b))==0){if(a){this.media.e_type=c}}}return d};tsip_session_invite.prototype.hold=function(b){if(this.o_stack.e_state!=tsip_transport_state_e.STARTED){tsk_utils_log_error("Stack not started");return -2}var c=-1;var a=new tsip_action(tsip_action_type_e.HOLD);if(a){a.media.e_type=b;c=this.__action_handle(a)}return c};tsip_session_invite.prototype.resume=function(b){if(this.o_stack.e_state!=tsip_transport_state_e.STARTED){tsk_utils_log_error("Stack not started");return -2}var c=-1;var a=new tsip_action(tsip_action_type_e.RESUME);if(a){a.media.e_type=b;c=this.__action_handle(a)}return c};tsip_session_invite.prototype.info=function(b,c){if(this.o_stack.e_state!=tsip_transport_state_e.STARTED){tsk_utils_log_error("Stack not started");return -2}var d=-1;var a=new tsip_action(tsip_action_type_e.INFO);if(a){if(c){a.add_headers(new tsip_header_Content_Type(c))}a.set_content(b);d=this.__action_handle(a)}return d};tsip_session_invite.prototype.dtmf=function(a){if(!a){tsk_utils_log_error("Invalid parameter");return -1}return this.info(tsk_string_format("Signal={0}\r\nDuration={1}",a,120),"application/dtmf-relay")};tsip_session_invite.prototype.transfer=function(b){if(!b){tsk_utils_log_error("Invalid parameter");return -1}if(this.o_stack.e_state!=tsip_transport_state_e.STARTED){tsk_utils_log_error("Stack not started");return -2}var a=tsip_uri_make_valid(b,this.o_stack.network.o_uri_realm.s_host);if(!a){tsk_utils_log_error("%s is not a valid SIP Uri",b);return -3}var d=-1;var c=new tsip_action(tsip_action_type_e.ECT);if(c){c.ect.s_to=tsip_uri_tostring(a,false,false);d=this.__action_handle(c)}return d};tsip_session_invite.prototype.transfer_accept=function(){return this.__action_any(tsip_action_type_e.ECT_ACCEPT)};tsip_session_invite.prototype.transfer_reject=function(){return this.__action_any(tsip_action_type_e.ECT_REJECT)};