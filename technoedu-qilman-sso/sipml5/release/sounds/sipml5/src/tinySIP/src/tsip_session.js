tsip_session.prototype.__i_expires_default=1800000;tsip_session.prototype.__i_session_id=0;tsip_session.prototype.__i_session_id_invalid=-1;tsip_session.prototype.on_event=null;var tsip_session_param_type_e={HEADER:0,CAPS:1,USR_DATA:2,TO_STR:3,from_STR:3,TO_URI:4,FROM_URI:5,NO_CONTACT:6,EXPIRES:7,SILENT_HANGUP:8,SIGCOMP_ID:9,PARENT_ID:10,BANDWIDTH:20,VIDEO_SIZE:21,INITIAL_MSG:50,MEDIA:100};function tsip_session(a){if(!a){tsk_utils_log_error("Invalid argument");return null}this.i_id=++tsip_session.prototype.__i_session_id;this.i_id_parent=tsip_session.prototype.__i_session_id_invalid;this.b_server=false;this.o_stack=a;this.o_usr_data=null;this.ao_caps=new Array();this.ao_headers=new Array();this.o_uri_from=a.identity.o_uri_impu;this.o_uri_to=null;this.i_expires=tsip_session.prototype.__i_expires_default;this.b_silent_hangup=false;this.b_no_contact=false;this.media={};this.media.e_type=tmedia_type_e.NONE;this.media.b_100rel=false;this.media.o_bandwidth=a.media.o_bandwidth;this.media.o_video_size=a.media.o_video_size;this.media.timers={};this.media.timers.s_refresher=null;this.media.timers.i_timeout=0;this.media.qos={};this.media.qos.e_type=tmedia_qos_stype_e.NONE;this.media.qos.e_strength=tmedia_qos_strength_e.NONE;this.media.msrp={};this.media.msrp.fn_callback=null}tsip_session.prototype.get_id=function(){return this.i_id};tsip_session.prototype.set=function(){return this.__set(arguments)};tsip_session.prototype.get_stack=function(){return this.o_stack};tsip_session.prototype.is_connected=function(){var a;if((a=this.o_stack.o_layer_dialog.find_by_ss(this))){return(a.e_state==tsip_dialog_state_e.ESTABLISHED)}return false};tsip_session.prototype.__set=function(c){var d;for(var a=0;a<c.length;++a){d=c[a];if(!d){continue}switch(d.e_type){case tsip_session_param_type_e.HEADER:this.ao_headers.push(new tsip_header_Dummy(d.ao_values[0],d.ao_values[1]));break;case tsip_session_param_type_e.CAPS:this.ao_caps.push(tsk_param_create(d.ao_values[0],d.ao_values[1]));break;case tsip_session_param_type_e.USR_DATA:this.o_usr_data=d.ao_values[0];break;case tsip_session_param_type_e.TO_STR:this.o_uri_to=tsip_uri_make_valid(d.ao_values[0],this.o_stack.network.o_uri_realm.s_host);break;case tsip_session_param_type_e.FROM_STR:this.o_uri_from=tsip_uri_make_valid(d.ao_values[0],this.o_stack.network.o_uri_realm.s_host);break;case tsip_session_param_type_e.TO_URI:if(!d.ao_values[0]||d.ao_values[0] instanceof tsip_uri){this.o_uri_to=d.ao_values[0]}else{tsk_utils_log_error("Not a valid uri object")}break;case tsip_session_param_type_e.FROM_URI:if(!d.ao_values[0]||d.ao_values[0] instanceof tsip_uri){this.o_uri_from=d.ao_values[0]}else{tsk_utils_log_error("Not a valid uri object")}break;case tsip_session_param_type_e.NO_CONTACT:this.b_no_contact=d.ao_values[0];break;case tsip_session_param_type_e.EXPIRES:this.i_expires=(d.ao_values[0]*1000);break;case tsip_session_param_type_e.SILENT_HANGUP:break;case tsip_session_param_type_e.SIGCOMP_ID:break;case tsip_session_param_type_e.PARENT_ID:break;case tsip_session_param_type_e.BANDWIDTH:this.media.o_bandwidth=d.ao_values[0];break;case tsip_session_param_type_e.VIDEO_SIZE:this.media.o_video_size=d.ao_values[0];break;case tsip_session_param_type_e.INITIAL_MSG:var b;if((b=d.ao_values[0])){if(b.o_hdr_From&&b.o_hdr_From.o_uri){this.o_uri_from=b.o_hdr_From.o_uri.clone(false,false)}if(b.o_hdr_To&&b.o_hdr_To.o_uri){this.o_uri_to=b.o_hdr_To.o_uri.clone(false,false)}this.b_server=true}break}}};tsip_session.prototype.SetHeader=function(b,a){return tsip_session.prototype.SetAny(tsip_session_param_type_e.HEADER,b,a)};tsip_session.prototype.SetExpires=function(a){return tsip_session.prototype.SetAny(tsip_session_param_type_e.EXPIRES,a)};tsip_session.prototype.SetUsrData=function(a){return tsip_session.prototype.SetAny(tsip_session_param_type_e.USR_DATA,a)};tsip_session.prototype.SetCaps=function(b,a){return tsip_session.prototype.SetAny(tsip_session_param_type_e.CAPS,b,a)};tsip_session.prototype.SetToStr=function(a){return tsip_session.prototype.SetAny(tsip_session_param_type_e.TO_STR,a)};tsip_session.prototype.SetToUri=function(a){return tsip_session.prototype.SetAny(tsip_session_param_type_e.TO_URI,a)};tsip_session.prototype.SetFromStr=function(a){return tsip_session.prototype.SetAny(tsip_session_param_type_e.FROM_STR,a)};tsip_session.prototype.SetInitialMessage=function(a){return tsip_session.prototype.SetAny(tsip_session_param_type_e.INITIAL_MSG,a)};tsip_session.prototype.SetBandwidth=function(a){return tsip_session.prototype.SetAny(tsip_session_param_type_e.BANDWIDTH,a)};tsip_session.prototype.SetVideoSize=function(a){return tsip_session.prototype.SetAny(tsip_session_param_type_e.VIDEO_SIZE,a)};tsip_session.prototype.SetInitialMessage=function(a){return tsip_session.prototype.SetAny(tsip_session_param_type_e.INITIAL_MSG,a)};tsip_session.prototype.SetAny=function(a){var b=new Object();b.e_type=a;b.ao_values=Array.prototype.slice.call(arguments,1);return b};if(!window.__b_release_mode){tsip_api_add_js_scripts("head","src/tinySIP/src/api/tsip_api_common.js","src/tinySIP/src/api/tsip_api_info.js","src/tinySIP/src/api/tsip_api_invite.js","src/tinySIP/src/api/tsip_api_message.js","src/tinySIP/src/api/tsip_api_options.js","src/tinySIP/src/api/tsip_api_publish.js","src/tinySIP/src/api/tsip_api_register.js","src/tinySIP/src/api/tsip_api_subscribe.js")};