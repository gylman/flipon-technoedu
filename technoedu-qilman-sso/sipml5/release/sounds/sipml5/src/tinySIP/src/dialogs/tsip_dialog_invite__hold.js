tsip_dialog_invite.prototype.init_hold=function(){this.o_fsm.set(tsk_fsm_entry.prototype.CreateAlways(tsip_dialog_invite_states_e.CONNECTED,tsip_dialog_invite_actions_e.O_HOLD,tsip_dialog_invite_states_e.HOLDING,x0100_Connected_2_Holding_X_oHold,"x0100_Connected_2_Holding_X_oHold"),tsk_fsm_entry.prototype.Create(tsip_dialog_invite_states_e.HOLDING,tsip_dialog_invite_actions_e.I_2XX,__tsip_dialog_invite_cond_is_resp2invite_or_update,tsip_dialog_invite_states_e.CONNECTED,x0101_Holding_2_Connected_X_ixxx,"x0101_Holding_2_Connected_X_ixxx"),tsk_fsm_entry.prototype.Create(tsip_dialog_invite_states_e.HOLDING,tsip_dialog_invite_actions_e.I_300_to_699,__tsip_dialog_invite_cond_is_resp2invite_or_update,tsip_dialog_invite_states_e.CONNECTED,x0101_Holding_2_Connected_X_ixxx,"x0101_Holding_2_Connected_X_ixxx"),tsk_fsm_entry.prototype.CreateAlways(tsip_dialog_invite_states_e.CONNECTED,tsip_dialog_invite_actions_e.O_RESUME,tsip_dialog_invite_states_e.RESUMING,x0102_Connected_2_Resuming_X_oResume,"x0102_Connected_2_Resuming_X_oResume"),tsk_fsm_entry.prototype.Create(tsip_dialog_invite_states_e.RESUMING,tsip_dialog_invite_actions_e.I_2XX,__tsip_dialog_invite_cond_is_resp2invite_or_update,tsip_dialog_invite_states_e.CONNECTED,x0103_Resuming_2_Connected_X_ixxx,"x0103_Resuming_2_Connected_X_ixxx"),tsk_fsm_entry.prototype.Create(tsip_dialog_invite_states_e.RESUMING,tsip_dialog_invite_actions_e.I_300_to_699,__tsip_dialog_invite_cond_is_resp2invite_or_update,tsip_dialog_invite_states_e.CONNECTED,x0103_Resuming_2_Connected_X_ixxx,"x0103_Resuming_2_Connected_X_ixxx"))};tsip_dialog_invite.prototype.hold_handle=function(c){if(!c||!this.o_msession_mgr||(!c.is_invite()&&!c.is_update())){tsk_utils_log_error("Invalid parameter");return -1}var b;var a;var d=0;b=this.o_msession_mgr.is_held(this.o_msession_mgr.e_type,false);a=!c.has_content()&&c.is_invite();if(a&&b){if((d=this.o_msession_mgr.resume(this.o_msession_mgr.e_type,false))==0){b=false}}if(d==0&&(b!=this.hold.b_remote)){this.hold.b_remote=b;this.signal_invite(this.hold.b_remote?tsip_event_invite_type_e.M_REMOTE_HOLD:tsip_event_invite_type_e.M_REMOTE_RESUME,tsip_event_invite_type_e.DIALOG_REQUEST_INCOMING,"Hold/Resume state changed",c)}return d};function x0100_Connected_2_Holding_X_oHold(a){var c;var d=a[0];var b=a[2];if(!d.o_msession_mgr){tsk_utils_log_warn("Media Session manager is Null");return 0}c=d.o_msession_mgr.hold(b.media.e_type);d.set_action_curr(b);if((iret=d.send_invite(false))){}return 0}function x0101_Holding_2_Connected_X_ixxx(a){var c;var d=a[0];var b=a[1];d.set_action_curr(null);if((c=d.process_ro(b))){return c}else{if(b.is_response_to_invite()){c=d.send_ack(b)}}if(b.is_2xx()){d.signal_invite(tsip_event_invite_type_e.M_LOCAL_HOLD_OK,b.get_response_code(),b.get_response_phrase(),b);d.hold.b_local=true}else{d.signal_invite(tsip_event_invite_type_e.M_LOCAL_HOLD_NOK,b.get_response_code(),b.get_response_phrase(),b);d.hold.b_local=false}return c}function x0102_Connected_2_Resuming_X_oResume(a){var c;var d=a[0];var b=a[2];if(!d.hold.b_local){tsk_utils_log_warn("Not on hold state");return 0}if(!d.o_msession_mgr){tsk_utils_log_warn("Media Session manager is Null");return 0}c=d.o_msession_mgr.resume(b.media.e_type,true);c=d.o_msession_mgr.resume(b.media.e_type,false);d.set_action_curr(b);if((c=d.send_invite(false))){}return 0}function x0103_Resuming_2_Connected_X_ixxx(a){var c;var d=a[0];var b=a[1];d.set_action_curr(null);if((c=d.process_ro(b))){return c}else{if(b.is_response_to_invite()){c=d.send_ack(b)}}if(b.is_2xx()){d.signal_invite(tsip_event_invite_type_e.M_LOCAL_RESUME_OK,b.get_response_code(),b.get_response_phrase(),b);d.hold.b_local=false}else{d.signal_invite(tsip_event_invite_type_e.M_LOCAL_RESUME_NOK,b.get_response_code(),b.get_response_phrase(),b);d.hold.b_local=true}return c};