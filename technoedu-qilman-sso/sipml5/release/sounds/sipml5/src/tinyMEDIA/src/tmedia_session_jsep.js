tmedia_session_jsep.prototype=Object.create(tmedia_session.prototype);tmedia_session_jsep00.prototype=Object.create(tmedia_session_jsep.prototype);tmedia_session_jsep01.prototype=Object.create(tmedia_session_jsep.prototype);tmedia_session_jsep.prototype.o_pc=null;tmedia_session_jsep.prototype.b_cache_stream=false;tmedia_session_jsep.prototype.o_local_stream=null;tmedia_session_jsep.prototype.o_sdp_jsep_lo=null;tmedia_session_jsep.prototype.o_sdp_lo=null;tmedia_session_jsep.prototype.b_sdp_lo_pending=false;tmedia_session_jsep.prototype.i_sdp_lo_version=-1;tmedia_session_jsep.prototype.o_sdp_json_ro=null;tmedia_session_jsep.prototype.o_sdp_ro=null;tmedia_session_jsep.prototype.b_sdp_ro_pending=false;tmedia_session_jsep.prototype.b_sdp_ro_offer=false;tmedia_session_jsep.prototype.s_answererSessionId=null;tmedia_session_jsep.prototype.s_offererSessionId=null;tmedia_session_jsep.prototype.ao_ice_servers=null;tmedia_session_jsep.prototype.o_bandwidth={audio:undefined,video:undefined};tmedia_session_jsep.prototype.o_video_size={minWidth:undefined,minHeight:undefined,maxWidth:undefined,maxHeight:undefined};tmedia_session_jsep.prototype.b_ro_changed=false;tmedia_session_jsep.prototype.b_lo_held=false;tmedia_session_jsep.prototype.b_ro_held=false;tmedia_session_jsep.prototype.CreateInstance=function(a){if(__o_peerconnection_class===window.webkitPeerConnection00||__o_peerconnection_class===window.w4aPeerConnection){return new tmedia_session_jsep00(a)}return new tmedia_session_jsep01(a)};function tmedia_session_jsep(a){tmedia_session.call(this,a.e_type,a)}tmedia_session_jsep.prototype.__set=function(a){if(!a){return -1}switch(a.s_key){case"ice-servers":this.ao_ice_servers=a.o_value;return 0;case"cache-stream":this.b_cache_stream=!!a.o_value;return 0;case"bandwidth":this.o_bandwidth=a.o_value;return 0;case"video-size":this.o_video_size=a.o_value;return 0}return -2};tmedia_session_jsep.prototype.__prepare=function(){return 0};tmedia_session_jsep.prototype.__processContent=function(c,a,b,d){if(this.o_pc&&this.o_pc.processContent){return this.o_pc.processContent(c,a,b,d)}};tmedia_session_jsep.prototype.__start=function(){if(this.o_local_stream&&this.o_local_stream.start){this.o_local_stream.start()}else{if(this.o_pc){if(__o_peerconnection_class===window.w4aPeerConnection){try{this.o_pc.startMedia()}catch(a){}}}}return 0};tmedia_session_jsep.prototype.__pause=function(){if(this.o_local_stream&&this.o_local_stream.pause){this.o_local_stream.pause()}return 0};tmedia_session_jsep.prototype.__stop=function(){this.close();this.o_sdp_lo=null;tsk_utils_log_info("PeerConnection::stop()");return 0};tmedia_session_jsep.prototype.decorate_lo=function(b){if(this.o_sdp_lo){var f;if((f=this.o_sdp_lo.get_header(tsdp_header_type_e.S))){f.s_value="Doubango Telecom - "+tsk_utils_get_navigator_friendly_name()}var a;if(this.i_sdp_lo_version==-1){this.i_sdp_lo_version=((__o_peerconnection_class==window.webkitRTCPeerConnection)||(__o_peerconnection_class==w4aPeerConnection))?2:1}if((a=this.o_sdp_lo.get_header(tsdp_header_type_e.O))){a.i_sess_version=this.i_sdp_lo_version;if(b){++this.i_sdp_lo_version}}if(
/*!this.o_sdp_ro &&*/
!(this.e_type.i_id&tmedia_type_e.VIDEO.i_id)){this.o_sdp_lo.remove_media("video")}var e=0;var c;var g=(__o_peerconnection_class==w4aPeerConnection);var d=!!this.o_sdp_lo.get_header_a("fingerprint");while((c=this.o_sdp_lo.get_header_at(tsdp_header_type_e.M,e++))){c.set_holdresume_att(this.b_lo_held,this.b_ro_held);if(!g){if(c.find_a("crypto")){c.s_proto="RTP/SAVPF"}else{if(d||c.find_a("fingerprint")){c.s_proto="UDP/TLS/RTP/SAVPF"}}}if(this.o_bandwidth){if(this.o_bandwidth.audio&&c.s_media.toLowerCase()=="audio"){c.add_header(new tsdp_header_B("AS:"+this.o_bandwidth.audio))}else{if(this.o_bandwidth.video&&c.s_media.toLowerCase()=="video"){c.add_header(new tsdp_header_B("AS:"+this.o_bandwidth.video))}}}}}return 0};tmedia_session_jsep.prototype.decorate_ro=function(j){if(this.o_sdp_ro){var e,a;var d=0,c;var b=(__o_peerconnection_class==w4aPeerConnection);if(j){this.o_sdp_ro.remove_header(tsdp_header_type_e.A)}var g=function(i,l){var m=i.s_value.match(/^\d\s+(\w+):([\D|\d]+)/i);if(m&&m.length==3){return m[l]}};var k=function(i){if(i&&i.s_field=="acap"){i.s_field=g(i,1);i.s_value=g(i,2)}};var f=function(n,q,p,o){var l=0;var i=function(v,u,t){if(v){var w=(v.ao_headers||v.ao_hdr_A);for(var s=0;s<w.length;++s){if(w[s].e_type==tsdp_header_type_e.A&&w[s].s_value){var r=(w[s].s_field===u);if(!r&&w[s].s_field=="acap"){r=(g(w[s],1)==u)}if(r&&l++>=t){return w[s]}}}}};var m=i(n,p,o);if(!m){return i(n.get_header_m_by_name(q),p,o)}return m};var h=!!this.o_sdp_ro.get_header_a("fingerprint");while((e=this.o_sdp_ro.get_header_at(tsdp_header_type_e.M,d++))){if(!b&&e.s_proto.indexOf("SAVP")<0){if(e.find_a("crypto")){e.s_proto="RTP/SAVPF";break}else{if(h||e.find_a("fingerprint")){e.s_proto="UDP/TLS/RTP/SAVPF";break}}}if(!b&&e.s_proto.indexOf("SAVP")<0){if((a=f(this.o_sdp_ro,e.s_media,"fingerprint",0))){k(a);if((a=f(this.o_sdp_ro,e.s_media,"setup",0))){k(a)}if((a=f(this.o_sdp_ro,e.s_media,"connection",0))){k(a)}e.s_proto="UDP/TLS/RTP/SAVP"}}if(!b&&e.s_proto.indexOf("SAVP")<0){c=0;while((a=f(this.o_sdp_ro,e.s_media,"crypto",c++))){k(a);e.s_proto="RTP/SAVPF"}}if(!b&&e.s_proto.indexOf("UDP/TLS/RTP/SAVP")!=-1){e.s_proto="RTP/SAVPF"}}}return 0};tmedia_session_jsep.prototype.subscribe_stream_events=function(){if(this.o_pc){this.o_pc.onstatechange=function(a){tsk_utils_log_info("__on_state_change")};this.o_pc.onopen=function(a){tsk_utils_log_info("__on_open")};this.o_pc.onaddstream=function(a){tsk_utils_log_info("__on_add_stream");var d=(tmedia_session_jsep01.mozThis||this.o_session);d.o_remote_stream=a.stream;if(d.o_mgr){if(!d.o_remote_stream.videoTracks||!d.o_remote_stream.audioTracks){var c=!!(d.e_type.i_id&tmedia_type_e.AUDIO.i_id);var b=!!(d.e_type.i_id&tmedia_type_e.VIDEO.i_id);d.o_remote_stream.audioTracks=d.o_remote_stream.getAudioTracks?d.o_remote_stream.getAudioTracks():{length:c?1:0};d.o_remote_stream.videoTracks=d.o_remote_stream.getVideoTracks?d.o_remote_stream.getVideoTracks():{length:b?1:0}}d.o_mgr.set_stream_remote(a.stream)}};this.o_pc.onremovestream=function(a){tsk_utils_log_info("__on_remove_stream");var b=(tmedia_session_jsep01.mozThis||this.o_session);b.o_remote_stream=null;if(b.o_mgr){b.o_mgr.set_stream_remote(null)}}}};tmedia_session_jsep.prototype.close=function(){if(this.o_mgr){this.o_mgr.set_stream_remote(null);this.o_mgr.set_stream_local(null)}if(this.o_pc){if(this.o_local_stream){try{this.o_pc.removeStream(this.o_local_stream)}catch(a){}if(!this.b_cache_stream||(this.e_type==tmedia_type_e.SCREEN_SHARE)){this.o_local_stream.stop()}this.o_local_stream=null}this.o_pc.close();this.o_pc=null;this.b_sdp_lo_pending=false;this.b_sdp_ro_pending=false}};tmedia_session_jsep.prototype.__acked=function(){return 0};tmedia_session_jsep.prototype.__hold=function(){if(this.b_lo_held){return}this.b_lo_held=true;this.close();this.o_sdp_ro=null;this.decorate_lo(true);return 0};tmedia_session_jsep.prototype.__resume=function(){if(!this.b_lo_held){return}this.b_lo_held=false;this.close();this.o_sdp_lo=null;this.o_sdp_ro=null;return 0};function tmedia_session_jsep00(a){tmedia_session_jsep.call(this,a)}tmedia_session_jsep00.prototype.__get_lo=function(){if(!this.o_pc&&!this.b_lo_held){this.o_mgr.set_stream_local(__o_roap_stream);this.o_local_stream=__o_roap_stream;var c=this;this.o_pc=new __o_peerconnection_class("STUN stun.l.google.com:19302",function(e,d){if(e){c.o_sdp_jsep_lo.addCandidate(e)}if(!d){c.o_sdp_lo=tsdp_message.prototype.Parse(c.o_sdp_jsep_lo.toSdp());if(c.o_sdp_lo){c.decorate_lo(true)}if(c.o_mgr){c.o_mgr.callback(tmedia_session_events_e.GET_LO_SUCCESS,c.e_type)}c.b_sdp_lo_pending=false}});this.o_pc.o_session=this;this.o_pc.o_mgr=this.o_mgr;this.subscribe_stream_events()}if(!this.o_sdp_lo&&!this.b_sdp_lo_pending){var a=true;var b=((this.b_sdp_ro_pending||this.b_sdp_ro_offer)&&(this.o_sdp_ro!=null));if(this.o_pc.localDescription){switch(this.o_pc.iceState){case __o_peerconnection_class.ICE_COMPLETED:case __o_peerconnection_class.ICE_FAILED:case __o_peerconnection_class.ICE_CLOSED:a=false;break}}if(this.b_sdp_ro_pending&&this.o_sdp_ro){this.__set_ro(this.o_sdp_ro,true)}this.o_sdp_jsep_lo=b?this.o_pc.createAnswer(this.o_pc.remoteDescription.toSdp(),{has_audio:!!(this.e_type.i_id&tmedia_type_e.AUDIO.i_id),has_video:!!(this.e_type.i_id&tmedia_type_e.VIDEO.i_id)}):this.o_pc.createOffer({has_audio:!!(this.e_type.i_id&tmedia_type_e.AUDIO.i_id),has_video:!!(this.e_type.i_id&tmedia_type_e.VIDEO.i_id)});if(!a){this.o_sdp_lo=tsdp_message.prototype.Parse(this.o_sdp_jsep_lo.toSdp());if(this.o_sdp_lo){this.decorate_lo(false);this.o_sdp_jsep_lo=new __o_sessiondescription_class(this.o_sdp_lo)}}this.o_pc.setLocalDescription(b?__o_peerconnection_class.SDP_ANSWER:__o_peerconnection_class.SDP_OFFER,this.o_sdp_jsep_lo);if(a){this.b_sdp_lo_pending=true;this.o_pc.startIce({use_candidates:"all"})}}return this.o_sdp_lo};tmedia_session_jsep00.prototype.__set_ro=function(c,a){if(!c){tsk_utils_log_error("Invalid argument");return -1}this.o_sdp_ro=c;this.b_sdp_ro_offer=a;if(this.o_pc){try{this.decorate_ro(true);this.o_pc.setRemoteDescription(a?__o_peerconnection_class.SDP_OFFER:__o_peerconnection_class.SDP_ANSWER,new __o_sessiondescription_class(this.o_sdp_ro.toString()));if(!this.b_sdp_ro_pending&&a){this.o_sdp_lo=null}}catch(b){this.o_mgr.callback(tmedia_session_events_e.SET_RO_FAILED,this.e_type);tsk_utils_log_error(b);return -2}finally{this.b_sdp_ro_pending=false}}else{this.b_sdp_ro_pending=true}return 0};function tmedia_session_jsep01(a){tmedia_session_jsep.call(this,a);this.o_media_constraints={mandatory:{OfferToReceiveAudio:!!(this.e_type.i_id&tmedia_type_e.AUDIO.i_id),OfferToReceiveVideo:!!(this.e_type.i_id&tmedia_type_e.VIDEO.i_id)}};if(tsk_utils_get_navigator_friendly_name()=="firefox"){tmedia_session_jsep01.mozThis=this;this.o_media_constraints.mandatory.MozDontOfferDataChannel=true}}tmedia_session_jsep01.mozThis=undefined;tmedia_session_jsep01.onGetUserMediaSuccess=function(c,d){tsk_utils_log_info("onGetUserMediaSuccess");var f=(tmedia_session_jsep01.mozThis||d);if(f&&f.o_pc&&f.o_mgr){if(!f.b_sdp_lo_pending){tsk_utils_log_warn("onGetUserMediaSuccess but no local sdp request is pending");return}if(!c.videoTracks||!c.audioTracks){var b=!!(f.e_type.i_id&tmedia_type_e.AUDIO.i_id);var a=!!(f.e_type.i_id&tmedia_type_e.VIDEO.i_id);c.audioTracks=c.getAudioTracks?c.getAudioTracks():{length:b?1:0};c.videoTracks=c.getVideoTracks?c.getVideoTracks():{length:a?1:0}}if(c.audioTracks.length>0&&c.videoTracks.length==0){__o_jsep_stream_audio=c}else{if(c.audioTracks.length>0&&c.videoTracks.length>0){__o_jsep_stream_audiovideo=c}}if(!f.o_local_stream){f.o_mgr.callback(tmedia_session_events_e.STREAM_LOCAL_ACCEPTED,this.e_type)}if(tmedia_session_jsep01.mozThis){__o_jsep_stream_audiovideo=__o_jsep_stream_audio=c}f.o_local_stream=c;f.o_pc.addStream(c);f.o_mgr.set_stream_local(c);var e=((f.b_sdp_ro_pending||f.b_sdp_ro_offer)&&(f.o_sdp_ro!=null));if(e){tsk_utils_log_info("createAnswer");f.o_pc.createAnswer(tmedia_session_jsep01.mozThis?tmedia_session_jsep01.onCreateSdpSuccess:function(g){tmedia_session_jsep01.onCreateSdpSuccess(g,f)},tmedia_session_jsep01.mozThis?tmedia_session_jsep01.onCreateSdpError:function(g){tmedia_session_jsep01.onCreateSdpError(g,f)},f.o_media_constraints,false)}else{tsk_utils_log_info("createOffer");f.o_pc.createOffer(tmedia_session_jsep01.mozThis?tmedia_session_jsep01.onCreateSdpSuccess:function(g){tmedia_session_jsep01.onCreateSdpSuccess(g,f)},tmedia_session_jsep01.mozThis?tmedia_session_jsep01.onCreateSdpError:function(g){tmedia_session_jsep01.onCreateSdpError(g,f)},f.o_media_constraints)}}};tmedia_session_jsep01.onGetUserMediaError=function(a,b){tsk_utils_log_info("onGetUserMediaError");var c=(tmedia_session_jsep01.mozThis||b);if(c&&c.o_mgr){tsk_utils_log_error(a);c.o_mgr.callback(tmedia_session_events_e.STREAM_LOCAL_REFUSED,c.e_type)}};tmedia_session_jsep01.onCreateSdpSuccess=function(b,a){tsk_utils_log_info("onCreateSdpSuccess");var c=(tmedia_session_jsep01.mozThis||a);if(c&&c.o_pc){c.o_pc.setLocalDescription(b,tmedia_session_jsep01.mozThis?tmedia_session_jsep01.onSetLocalDescriptionSuccess:function(){tmedia_session_jsep01.onSetLocalDescriptionSuccess(c)},tmedia_session_jsep01.mozThis?tmedia_session_jsep01.onSetLocalDescriptionError:function(d){tmedia_session_jsep01.onSetLocalDescriptionError(d,c)});if(tmedia_session_jsep01.mozThis&&!tmedia_session_jsep01.mozThis.localDescription){tmedia_session_jsep01.mozThis.localDescription=b}}};tmedia_session_jsep01.onCreateSdpError=function(a,b){tsk_utils_log_info("onCreateSdpError");var c=(tmedia_session_jsep01.mozThis||b);if(c&&c.o_mgr){tsk_utils_log_error(a);c.o_mgr.callback(tmedia_session_events_e.GET_LO_FAILED,c.e_type)}};tmedia_session_jsep01.onSetLocalDescriptionSuccess=function(a){tsk_utils_log_info("onSetLocalDescriptionSuccess");var b=(tmedia_session_jsep01.mozThis||a);if(b&&b.o_pc){if(tmedia_session_jsep01.mozThis){tmedia_session_jsep01.onIceGatheringCompleted(b)}}};tmedia_session_jsep01.onSetLocalDescriptionError=function(a,b){tsk_utils_log_info("onSetLocalDescriptionError");var c=(tmedia_session_jsep01.mozThis||b);if(c&&c.o_mgr){tsk_utils_log_error(a.toString());c.o_mgr.callback(tmedia_session_events_e.GET_LO_FAILED,c.e_type)}};tmedia_session_jsep01.onSetRemoteDescriptionSuccess=function(a){tsk_utils_log_info("onSetRemoteDescriptionSuccess");var b=(tmedia_session_jsep01.mozThis||a);if(b){if(!b.b_sdp_ro_pending&&b.b_sdp_ro_offer){b.o_sdp_lo=null}}};tmedia_session_jsep01.onSetRemoteDescriptionError=function(a,b){tsk_utils_log_info("onSetRemoteDescriptionError");var c=(tmedia_session_jsep01.mozThis||b);if(c){c.o_mgr.callback(tmedia_session_events_e.SET_RO_FAILED,c.e_type);tsk_utils_log_error(a)}};tmedia_session_jsep01.onIceGatheringCompleted=function(b){tsk_utils_log_info("onIceGatheringCompleted");var c=(tmedia_session_jsep01.mozThis||b);if(c&&c.o_pc){if(!c.b_sdp_lo_pending){tsk_utils_log_warn("onIceGatheringCompleted but no local sdp request is pending");return}c.b_sdp_lo_pending=false;var a=(c.localDescription||c.o_pc.localDescription);if(a){c.o_sdp_jsep_lo=a;c.o_sdp_lo=tsdp_message.prototype.Parse(c.o_sdp_jsep_lo.sdp);c.decorate_lo(true);if(c.o_mgr){c.o_mgr.callback(tmedia_session_events_e.GET_LO_SUCCESS,c.e_type)}}else{c.o_mgr.callback(tmedia_session_events_e.GET_LO_FAILED,c.e_type);tsk_utils_log_error("localDescription is null")}}};tmedia_session_jsep01.onIceCandidate=function(b,a){var c=(tmedia_session_jsep01.mozThis||a);if(!c||!c.o_pc){tsk_utils_log_error("This/PeerConnection is null: unexpected");return}tsk_utils_log_info("onIceCandidate = "+c.o_pc.iceState);if(c.o_pc.iceState=="completed"||(b&&!b.candidate)){tsk_utils_log_info("ICE GATHERING COMPLETED!");tmedia_session_jsep01.onIceGatheringCompleted(c)}else{if(c.o_pc.iceState=="failed"){tsk_utils_log_error("Ice state is 'failed'");c.o_mgr.callback(tmedia_session_events_e.GET_LO_FAILED,c.e_type)}}};tmedia_session_jsep01.prototype.__get_lo=function(){var c=this;if(!this.o_pc&&!this.b_lo_held){var d={mandatory:{},optional:[]};if((this.e_type.i_id&tmedia_type_e.SCREEN_SHARE.i_id)==tmedia_type_e.SCREEN_SHARE.i_id){d.mandatory.chromeMediaSource="screen"}if(this.e_type.i_id&tmedia_type_e.VIDEO.i_id){if(this.o_video_size){if(this.o_video_size.minWidth){d.mandatory.minWidth=this.o_video_size.minWidth}if(this.o_video_size.minHeight){d.mandatory.minHeight=this.o_video_size.minHeight}if(this.o_video_size.maxWidth){d.mandatory.maxWidth=this.o_video_size.maxWidth}if(this.o_video_size.maxHeight){d.mandatory.maxHeight=this.o_video_size.maxHeight}}try{tsk_utils_log_info("Video Contraints:"+JSON.stringify(d))}catch(b){}}var a=this.ao_ice_servers;if(!a){a=tmedia_session_jsep01.mozThis?[{url:"stun:23.21.150.121:3478"},{url:"stun:216.93.246.18:3478"},{url:"stun:66.228.45.110:3478"},{url:"stun:173.194.78.127:19302"}]:[{url:"stun:stun.l.google.com:19302"},{url:"stun:stun.counterpath.net:3478"},{url:"stun:numb.viagenie.ca:3478"}]}try{tsk_utils_log_info("ICE servers:"+JSON.stringify(a))}catch(b){}this.o_pc=new __o_peerconnection_class((a&&!a.length)?null:{iceServers:a},this.o_media_constraints);this.o_pc.onicecandidate=tmedia_session_jsep01.mozThis?tmedia_session_jsep01.onIceCandidate:function(e){tmedia_session_jsep01.onIceCandidate(e,c)};this.o_pc.o_mgr=this.o_mgr;if(!tmedia_session_jsep01.mozThis){this.o_pc.o_session=this}this.subscribe_stream_events()}if(!this.o_sdp_lo&&!this.b_sdp_lo_pending){this.b_sdp_lo_pending=true;if(this.b_sdp_ro_pending&&this.o_sdp_ro){this.__set_ro(this.o_sdp_ro,true)}if(this.e_type==tmedia_type_e.AUDIO&&(this.b_cache_stream&&__o_jsep_stream_audio)){tmedia_session_jsep01.onGetUserMediaSuccess(__o_jsep_stream_audio,c)}else{if(this.e_type==tmedia_type_e.AUDIO_VIDEO&&(this.b_cache_stream&&__o_jsep_stream_audiovideo)){tmedia_session_jsep01.onGetUserMediaSuccess(__o_jsep_stream_audiovideo,c)}else{this.o_mgr.callback(tmedia_session_events_e.STREAM_LOCAL_REQUESTED,this.e_type);navigator.nativeGetUserMedia({audio:(this.e_type==tmedia_type_e.SCREEN_SHARE)?false:!!(this.e_type.i_id&tmedia_type_e.AUDIO.i_id),video:!!(this.e_type.i_id&tmedia_type_e.VIDEO.i_id)?d:false,data:false},tmedia_session_jsep01.mozThis?tmedia_session_jsep01.onGetUserMediaSuccess:function(e){tmedia_session_jsep01.onGetUserMediaSuccess(e,c)},tmedia_session_jsep01.mozThis?tmedia_session_jsep01.onGetUserMediaError:function(e){tmedia_session_jsep01.onGetUserMediaError(e,c)})}}}return this.o_sdp_lo};tmedia_session_jsep01.prototype.__set_ro=function(c,a){if(!c){tsk_utils_log_error("Invalid argument");return -1}this.o_sdp_ro=c;this.b_sdp_ro_offer=a;if(this.o_pc){try{var d=this;this.decorate_ro(false);tsk_utils_log_info("setRemoteDescription("+(a?"offer)":"answer)")+"\n"+this.o_sdp_ro);this.o_pc.setRemoteDescription(new __o_sessiondescription_class({type:a?"offer":"answer",sdp:d.o_sdp_ro.toString()}),tmedia_session_jsep01.mozThis?tmedia_session_jsep01.onSetRemoteDescriptionSuccess:function(){tmedia_session_jsep01.onSetRemoteDescriptionSuccess(d)},tmedia_session_jsep01.mozThis?tmedia_session_jsep01.onSetRemoteDescriptionError:function(e){tmedia_session_jsep01.onSetRemoteDescriptionError(e,d)})}catch(b){tsk_utils_log_error(b);this.o_mgr.callback(tmedia_session_events_e.SET_RO_FAILED,this.e_type);return -2}finally{this.b_sdp_ro_pending=false}}else{this.b_sdp_ro_pending=true}return 0};