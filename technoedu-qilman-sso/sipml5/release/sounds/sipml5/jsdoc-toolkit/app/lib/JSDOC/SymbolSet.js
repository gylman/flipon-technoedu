JSDOC.SymbolSet=function(){this.init()};JSDOC.SymbolSet.prototype.init=function(){this._index=new Hash()};JSDOC.SymbolSet.prototype.keys=function(){return this._index.keys()};JSDOC.SymbolSet.prototype.hasSymbol=function(a){return this._index.hasKey(a)};JSDOC.SymbolSet.prototype.addSymbol=function(a){if(JSDOC.opt.a&&this.hasSymbol(a.alias)){LOG.warn("Overwriting symbol documentation for: "+a.alias+".");this.deleteSymbol(a.alias)}this._index.set(a.alias,a)};JSDOC.SymbolSet.prototype.getSymbol=function(a){if(this.hasSymbol(a)){return this._index.get(a)}};JSDOC.SymbolSet.prototype.getSymbolByName=function(a){for(var c=this._index.first();c;c=this._index.next()){var b=c.value;if(b.name==a){return b}}};JSDOC.SymbolSet.prototype.toArray=function(){return this._index.values()};JSDOC.SymbolSet.prototype.deleteSymbol=function(a){if(!this.hasSymbol(a)){return}this._index.drop(a)};JSDOC.SymbolSet.prototype.renameSymbol=function(b,a){this._index.replace(b,a);this._index.get(a).alias=a;return a};JSDOC.SymbolSet.prototype.relate=function(){this.resolveBorrows();this.resolveMemberOf();this.resolveAugments()};JSDOC.SymbolSet.prototype.resolveBorrows=function(){for(var a=this._index.first();a;a=this._index.next()){var d=a.value;if(d.is("FILE")||d.is("GLOBAL")){continue}var g=d.inherits;for(var f=0;f<g.length;f++){if(/#$/.test(g[f].alias)){LOG.warn("Attempted to borrow entire instance of "+g[f].alias+" but that feature is not yet implemented.");return}var k=this.getSymbol(g[f].alias);if(!k){LOG.warn("Can't borrow undocumented "+g[f].alias+".");continue}if(g[f].as==k.alias){var e=k.name.split(/([#.-])/).pop();g[f].as=d.name+RegExp.$1+e;LOG.inform("Assuming borrowed as name is "+g[f].as+" but that feature is experimental.")}var j=g[f].as;var b=j;if(!j){LOG.warn("Malformed @borrow, 'as' is required.");continue}if(j.length>d.alias.length&&j.indexOf(d.alias)==0){j=j.replace(k.alias,"")}else{var c="";if(j.charAt(0)!="#"){c="."}b=k.alias+c+j}j=j.replace(/^[#.]/,"");if(this.hasSymbol(b)){continue}var h=k.clone();h.name=j;h.alias=b;this.addSymbol(h)}}};JSDOC.SymbolSet.prototype.resolveMemberOf=function(){for(var f=this._index.first();f;f=this._index.next()){var d=f.value;if(d.is("FILE")||d.is("GLOBAL")){continue}else{if(d.memberOf){if(d.alias.indexOf(d.memberOf)==0){var h=new RegExp("^("+d.memberOf+")[.#-]?(.+)$");var g=d.alias.match(h);if(g){d.memberOf=g[1];d.name=g[2]}var b=d.name.match(h);if(b){d.name=b[2]}}else{var c=d.memberOf.charAt(d.memberOf.length-1);if(!/[.#-]/.test(c)){d.memberOf+="."}this.renameSymbol(d.alias,d.memberOf+d.name)}}else{var e=d.alias.match(/^(.*[.#-])([^.#-]+)$/);if(e){d.memberOf=e[1];d.name=e[2]}}}if(d.memberOf){switch(d.memberOf.charAt(d.memberOf.length-1)){case"#":d.isStatic=false;d.isInner=false;break;case".":d.isStatic=true;d.isInner=false;break;case"-":d.isStatic=false;d.isInner=true;break;default:d.isStatic=true;break}}if(!d.is("CONSTRUCTOR")&&!d.isNamespace&&d.memberOf==""){d.memberOf="_global_"}if(d.memberOf.match(/[.#-]$/)){d.memberOf=d.memberOf.substr(0,d.memberOf.length-1)}if(d.memberOf){var a=this.getSymbol(d.memberOf);if(!a){if(JSDOC.Lang.isBuiltin(d.memberOf)){a=JSDOC.Parser.addBuiltin(d.memberOf)}else{LOG.warn("Trying to document "+d.name+" as a member of undocumented symbol "+d.memberOf+".")}}if(a){a.addMember(d)}}}};JSDOC.SymbolSet.prototype.resolveAugments=function(){for(var b=this._index.first();b;b=this._index.next()){var a=b.value;if(a.alias=="_global_"||a.is("FILE")){continue}JSDOC.SymbolSet.prototype.walk.apply(this,[a])}};JSDOC.SymbolSet.prototype.walk=function(g){var a=g.augments;for(var e=0;e<a.length;e++){var f=this.getSymbol(a[e]);if(!f&&JSDOC.Lang.isBuiltin(""+a[e])){f=new JSDOC.Symbol("_global_."+a[e],[],a[e],new JSDOC.DocComment("Built in."));f.isNamespace=true;f.srcFile="";f.isPrivate=false;JSDOC.Parser.addSymbol(f)}if(f){if(f.augments.length){JSDOC.SymbolSet.prototype.walk.apply(this,[f])}g.inheritsFrom.push(f.alias);var h=f.methods;var c=f.properties;for(var d=0,b=h.length;d<b;d++){if(!h[d].isStatic){g.inherit(h[d])}}for(var d=0,b=c.length;d<b;d++){if(!c[d].isStatic){g.inherit(c[d])}}}else{LOG.warn("Can't augment contributer: "+a[e]+", not found.")}}};