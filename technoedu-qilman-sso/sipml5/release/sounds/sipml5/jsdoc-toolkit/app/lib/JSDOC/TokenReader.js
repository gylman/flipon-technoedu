if(typeof JSDOC=="undefined"){JSDOC={}}JSDOC.TokenReader=function(){this.keepDocs=true;this.keepWhite=false;this.keepComments=false};JSDOC.TokenReader.prototype.tokenize=function(b){var a=[];a.last=function(){return a[a.length-1]};a.lastSym=function(){for(var c=a.length-1;c>=0;c--){if(!(a[c].is("WHIT")||a[c].is("COMM"))){return a[c]}}};while(!b.look().eof){if(this.read_mlcomment(b,a)){continue}if(this.read_slcomment(b,a)){continue}if(this.read_dbquote(b,a)){continue}if(this.read_snquote(b,a)){continue}if(this.read_regx(b,a)){continue}if(this.read_numb(b,a)){continue}if(this.read_punc(b,a)){continue}if(this.read_newline(b,a)){continue}if(this.read_space(b,a)){continue}if(this.read_word(b,a)){continue}a.push(new JSDOC.Token(b.next(),"TOKN","UNKNOWN_TOKEN"))}return a};JSDOC.TokenReader.prototype.read_word=function(d,c){var b="";while(!d.look().eof&&JSDOC.Lang.isWordChar(d.look())){b+=d.next()}if(b===""){return false}else{var a;if((a=JSDOC.Lang.keyword(b))){c.push(new JSDOC.Token(b,"KEYW",a))}else{c.push(new JSDOC.Token(b,"NAME","NAME"))}return true}};JSDOC.TokenReader.prototype.read_punc=function(d,c){var b="";var a;while(!d.look().eof&&JSDOC.Lang.punc(b+d.look())){b+=d.next()}if(b===""){return false}else{c.push(new JSDOC.Token(b,"PUNC",JSDOC.Lang.punc(b)));return true}};JSDOC.TokenReader.prototype.read_space=function(c,b){var a="";while(!c.look().eof&&JSDOC.Lang.isSpace(c.look())){a+=c.next()}if(a===""){return false}else{if(this.collapseWhite){a=" "}if(this.keepWhite){b.push(new JSDOC.Token(a,"WHIT","SPACE"))}return true}};JSDOC.TokenReader.prototype.read_newline=function(c,b){var a="";while(!c.look().eof&&JSDOC.Lang.isNewline(c.look())){a+=c.next()}if(a===""){return false}else{if(this.collapseWhite){a="\n"}if(this.keepWhite){b.push(new JSDOC.Token(a,"WHIT","NEWLINE"))}return true}};JSDOC.TokenReader.prototype.read_mlcomment=function(c,b){if(c.look()=="/"&&c.look(1)=="*"){var a=c.next(2);while(!c.look().eof&&!(c.look(-1)=="/"&&c.look(-2)=="*")){a+=c.next()}if(/^\/\*\*([^\/]|\*[^*])/.test(a)&&this.keepDocs){b.push(new JSDOC.Token(a,"COMM","JSDOC"))}else{if(this.keepComments){b.push(new JSDOC.Token(a,"COMM","MULTI_LINE_COMM"))}}return true}return false};JSDOC.TokenReader.prototype.read_slcomment=function(c,b){var a;if((c.look()=="/"&&c.look(1)=="/"&&(a=c.next(2)))||(c.look()=="<"&&c.look(1)=="!"&&c.look(2)=="-"&&c.look(3)=="-"&&(a=c.next(4)))){while(!c.look().eof&&!JSDOC.Lang.isNewline(c.look())){a+=c.next()}if(this.keepComments){b.push(new JSDOC.Token(a,"COMM","SINGLE_LINE_COMM"))}return true}return false};JSDOC.TokenReader.prototype.read_dbquote=function(c,b){if(c.look()=='"'){var a=c.next();while(!c.look().eof){if(c.look()=="\\"){if(JSDOC.Lang.isNewline(c.look(1))){do{c.next()}while(!c.look().eof&&JSDOC.Lang.isNewline(c.look()));a+="\\\n"}else{a+=c.next(2)}}else{if(c.look()=='"'){a+=c.next();b.push(new JSDOC.Token(a,"STRN","DOUBLE_QUOTE"));return true}else{a+=c.next()}}}}return false};JSDOC.TokenReader.prototype.read_snquote=function(c,b){if(c.look()=="'"){var a=c.next();while(!c.look().eof){if(c.look()=="\\"){a+=c.next(2)}else{if(c.look()=="'"){a+=c.next();b.push(new JSDOC.Token(a,"STRN","SINGLE_QUOTE"));return true}else{a+=c.next()}}}}return false};JSDOC.TokenReader.prototype.read_numb=function(c,b){if(c.look()==="0"&&c.look(1)=="x"){return this.read_hex(c,b)}var a="";while(!c.look().eof&&JSDOC.Lang.isNumber(a+c.look())){a+=c.next()}if(a===""){return false}else{if(/^0[0-7]/.test(a)){b.push(new JSDOC.Token(a,"NUMB","OCTAL"))}else{b.push(new JSDOC.Token(a,"NUMB","DECIMAL"))}return true}};JSDOC.TokenReader.prototype.read_hex=function(c,b){var a=c.next(2);while(!c.look().eof){if(JSDOC.Lang.isHexDec(a)&&!JSDOC.Lang.isHexDec(a+c.look())){b.push(new JSDOC.Token(a,"NUMB","HEX_DEC"));return true}else{a+=c.next()}}return false};JSDOC.TokenReader.prototype.read_regx=function(d,c){var b;if(d.look()=="/"&&((!(b=c.lastSym())||(!b.is("NUMB")&&!b.is("NAME")&&!b.is("RIGHT_PAREN")&&!b.is("RIGHT_BRACKET"))))){var a=d.next();while(!d.look().eof){if(d.look()=="\\"){a+=d.next(2)}else{if(d.look()=="/"){a+=d.next();while(/[gmi]/.test(d.look())){a+=d.next()}c.push(new JSDOC.Token(a,"REGX","REGX"));return true}else{a+=d.next()}}}}return false};