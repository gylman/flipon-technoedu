JSDOC.JsDoc=function(d){if(d){JSDOC.opt=d}if(JSDOC.opt.h){JSDOC.usage();quit()}if(JSDOC.opt._.length==0){LOG.warn("No source files to work on. Nothing to do.");quit()}if(JSDOC.opt.t===true||JSDOC.opt.d===true){JSDOC.usage()}if(typeof JSDOC.opt.d=="string"){if(!JSDOC.opt.d.charAt(JSDOC.opt.d.length-1).match(/[\\\/]/)){JSDOC.opt.d=JSDOC.opt.d+"/"}LOG.inform("Output directory set to '"+JSDOC.opt.d+"'.");IO.mkPath(JSDOC.opt.d)}if(JSDOC.opt.e){IO.setEncoding(JSDOC.opt.e)}if(typeof JSDOC.opt.r=="boolean"){JSDOC.opt.r=10}else{if(!isNaN(parseInt(JSDOC.opt.r))){JSDOC.opt.r=parseInt(JSDOC.opt.r)}else{JSDOC.opt.r=1}}var f={};if(JSDOC.opt.D){for(var b=0;b<JSDOC.opt.D.length;b++){var g=JSDOC.opt.D[b];if(g.length>1&&g.charAt(0)=='"'&&g.charAt(g.length-1)=='"'){g=g.substr(1,g.length-2)}var a=g.split(":");if(a&&a.length>1){for(var e=2;e<a.length;e++){a[1]+=":"+a[e]}f[a[0]]=a[1]}}}JSDOC.opt.D=f;if(defined(JSDOC.conf)){for(var h in JSDOC.conf.D){if(!defined(JSDOC.opt.D[h])){JSDOC.opt.D[h]=JSDOC.conf.D[h]}}}if(defined(JSDOC.PluginManager)){JSDOC.PluginManager.run("onInit",JSDOC.opt)}JSDOC.opt.srcFiles=JSDOC.JsDoc._getSrcFiles();JSDOC.JsDoc._parseSrcFiles();JSDOC.JsDoc.symbolSet=JSDOC.Parser.symbols};JSDOC.JsDoc._getSrcFiles=function(){JSDOC.JsDoc.srcFiles=[];var b=["js"];if(JSDOC.opt.x){b=JSDOC.opt.x.split(",").map(function(c){return c.toLowerCase()})}for(var a=0;a<JSDOC.opt._.length;a++){JSDOC.JsDoc.srcFiles=JSDOC.JsDoc.srcFiles.concat(IO.ls(JSDOC.opt._[a],JSDOC.opt.r).filter(function(d){var c=d.split(".").pop().toLowerCase();if(JSDOC.opt.E){for(var e=0;e<JSDOC.opt.E.length;e++){if(d.match(new RegExp(JSDOC.opt.E[e]))){LOG.inform("Excluding "+d);return false}}}return(b.indexOf(c)>-1)}))}return JSDOC.JsDoc.srcFiles};JSDOC.JsDoc._parseSrcFiles=function(){JSDOC.Parser.init();for(var b=0,a=JSDOC.JsDoc.srcFiles.length;b<a;b++){var d=JSDOC.JsDoc.srcFiles[b];if(JSDOC.opt.v){LOG.inform("Parsing file: "+d)}try{var h=IO.readFile(d)}catch(g){LOG.warn("Can't read source file '"+d+"': "+g.message)}var f=new JSDOC.TokenReader();var c=new JSDOC.TokenStream(f.tokenize(new JSDOC.TextStream(h)));JSDOC.Parser.parse(c,d)}JSDOC.Parser.finish();if(JSDOC.PluginManager){JSDOC.PluginManager.run("onFinishedParsing",JSDOC.Parser.symbols)}};