function publish(symbolSet){publish.conf={name:"neo-jsdoctpl-bootstrap",version:"0.0",ext:".html",outDir:JSDOC.opt.d||SYS.pwd+"../out/jsdoc/",templatesDir:JSDOC.opt.t||SYS.pwd+"../templates/jsdoc/",symbolsDir:"symbols/",srcDir:"symbols/src/"};eval(include("extends/Link.js"));if(JSDOC.opt.s&&defined(Link)&&Link.prototype._makeSrcLink){Link.prototype._makeSrcLink=function(srcFilePath){return"&lt;"+srcFilePath+"&gt;"}}IO.mkPath((publish.conf.outDir+"symbols/src").split("/"));IO.mkPath((publish.conf.outDir+"js").split("/"));IO.mkPath((publish.conf.outDir+"css").split("/"));IO.mkPath((publish.conf.outDir+"img").split("/"));Link.symbolSet=symbolSet;try{var classTemplate=new JSDOC.JsPlate(publish.conf.templatesDir+"class.tmpl");var classesTemplate=new JSDOC.JsPlate(publish.conf.templatesDir+"allclasses.tmpl");var sourceTemplate=new JSDOC.JsPlate(publish.conf.templatesDir+"source.tmpl")}catch(e){print("Couldn't create the required templates: "+e);quit()}function hasNoParent($){return($.memberOf=="")}function isaFile($){return($.is("FILE"))}function isaClass($){return($.is("CONSTRUCTOR")||$.isNamespace)}var symbols=symbolSet.toArray();var classes=smartSort(symbols.filter(isaClass));if(JSDOC.opt.u){var filemapCounts={};Link.filemap={};for(var i=0,l=classes.length;i<l;i++){var lcAlias=classes[i].alias.toLowerCase();if(!filemapCounts[lcAlias]){filemapCounts[lcAlias]=1}else{filemapCounts[lcAlias]++}Link.filemap[classes[i].alias]=(filemapCounts[lcAlias]>1)?lcAlias+"_"+filemapCounts[lcAlias]:lcAlias}}Link.base="../";publish.classesIndex=classesTemplate.process(classes);for(var i=0,l=classes.length;i<l;i++){var symbol=classes[i];symbol.events=symbol.getEvents();symbol.methods=symbol.getMethods();Link.currentSymbol=symbol;var output="";output=classTemplate.process(symbol);IO.saveFile(publish.conf.outDir+"symbols/",((JSDOC.opt.u)?Link.filemap[symbol.alias]:symbol.alias)+publish.conf.ext,output)}Link.base="../../";publish.classesIndex=classesTemplate.process(classes);var files=JSDOC.opt.srcFiles;for(var i=0,l=files.length;i<l;i++){var file=files[i];var srcDir=publish.conf.outDir+"symbols/src/";var name=file.replace(/\.\.?[\\\/]/g,"").replace(/[\\\/]/g,"_");name=name.replace(/\:/g,"_");var output="";output=sourceTemplate.process({file:file,source:escapeHTML(IO.readFile(file))});IO.saveFile(srcDir,name+publish.conf.ext,output)}Link.base="";publish.classesIndex=classesTemplate.process(classes);try{var classesindexTemplate=new JSDOC.JsPlate(publish.conf.templatesDir+"index.tmpl")}catch(e){print(e.message);quit()}var classesIndex=classesindexTemplate.process(classes);IO.saveFile(publish.conf.outDir,"index"+publish.conf.ext,classesIndex);classesindexTemplate=classesIndex=classes=null;try{var fileindexTemplate=new JSDOC.JsPlate(publish.conf.templatesDir+"allfiles.tmpl")}catch(e){print(e.message);quit()}var documentedFiles=symbols.filter(isaFile);var allFiles=[];for(var i=0;i<files.length;i++){allFiles.push(new JSDOC.Symbol(files[i],[],"FILE",new JSDOC.DocComment("/** */")))}for(var i=0;i<documentedFiles.length;i++){var offset=files.indexOf(documentedFiles[i].alias);allFiles[offset]=documentedFiles[i]}allFiles=allFiles.sort(makeSortby("name"));var filesIndex=fileindexTemplate.process(allFiles);IO.saveFile(publish.conf.outDir,"files"+publish.conf.ext,filesIndex);fileindexTemplate=filesIndex=files=null;var dstDir;var jsPaths=["jquery-1.7.2.min.js","accordion.js","google-code-prettify/prettify.js"];var numOfJsPaths=jsPaths.length;var jsPath;dstDir=publish.conf.outDir+"js/";for(var i=0;i<numOfJsPaths;i++){jsPath=jsPaths[i];IO.copyFile(publish.conf.templatesDir+"static/"+jsPath,dstDir)}var cssPaths=["common.css","bootstrap/css/bootstrap.min.css","google-code-prettify/prettify.css","print.css"];var numOfCssPaths=cssPaths.length;var cssPath;dstDir=publish.conf.outDir+"css/";for(var i=0;i<numOfCssPaths;i++){cssPath=cssPaths[i];IO.copyFile(publish.conf.templatesDir+"static/"+cssPath,dstDir)}var imgPaths=["bootstrap/img/glyphicons-halflings-white.png","bootstrap/img/glyphicons-halflings.png","img/classicons.png","img/class.png","img/interface.png","img/namespace.png"];var numOfImgPaths=imgPaths.length;var imgPath;dstDir=publish.conf.outDir+"img/";for(var i=0;i<numOfImgPaths;i++){imgPath=imgPaths[i];IO.copyFile(publish.conf.templatesDir+"static/"+imgPath,dstDir)}}function summarize(a){if(typeof a!="undefined"){return a.match(/([\w\W]+?\.)[^a-z0-9_$]/i)?RegExp.$1:a}}function makeSortby(a){return function(d,c){if(d[a]!=undefined&&c[a]!=undefined){d=d[a].toLowerCase();c=c[a].toLowerCase();if(d<c){return -1}if(d>c){return 1}return 0}}}function include(a){var a=publish.conf.templatesDir+a;return IO.readFile(a)}function makeSignature(b){if(!b){return"( )"}var a=b.filter(function(c){return c.name.indexOf(".")==-1}).map(function(d){var c=createTypeLink(d.type)+" "+d.name;if(d.isOptional){c="["+c+"]"}return c}).join(", ");a="( "+a+" )";return a}function resolveLinks(a,b){a=a.replace(/\{@link ([^} ]+) ?\}/gi,function(c,d){return new Link().toSymbol(d)});return a}function getParentSymbols(c){var b=c;var a=[];while(b){b=JSDOC.Parser.symbols.getSymbol(b.augments);if(!b){break}a.unshift(b)}return a}function getParentNamespaces(c){var b=c.alias.split(".").slice(0,-1);var a=[];while(b.length){a.push(JSDOC.Parser.symbols.getSymbol(b.join(".")));b.pop()}return a}var smartSort=function(a){return a.sort(makeSortWithCaseSensitiveBy("alias"))};function makeSortWithCaseSensitiveBy(a){return function(d,c){if(d[a]!=undefined&&c[a]!=undefined){d=d[a];c=c[a];if(d<c){return -1}if(d>c){return 1}return 0}}}function convInlineCodes(b){var a=b.replace(/<pre>/ig,'<pre class="prettyprint linenums">');a=a.replace(/\{@link ([^} ]+) ?\}/gi,"<code>$1</code>");return a}function createInlineCodes(a,b){a=a.replace(/\{@link ([^} ]+) ?\}/gi,function(c,d){return new Link().toSymbol(d)});return a}function createDescription(a){return convInlineCodes(resolveLinks(a||"No description."))}function createTypeLink(c){var d="";if(c){var b=c.split("|");var a=[];b.forEach(function(e){a.push(new Link().toSymbol(e).toString())});d=a.join("/")}else{d="unknown"}return'<span class="jsdoc-typedesc">'+d+"</span>"}function escapeHTML(a){return a.replace(/&/g,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;")};