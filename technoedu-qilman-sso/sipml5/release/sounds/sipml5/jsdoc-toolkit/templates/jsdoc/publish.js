function publish(c){publish.conf={ext:".html",outDir:JSDOC.opt.d||SYS.pwd+"../out/jsdoc/",templatesDir:JSDOC.opt.t||SYS.pwd+"../templates/jsdoc/",symbolsDir:"symbols/",srcDir:"symbols/src/"};if(JSDOC.opt.s&&defined(Link)&&Link.prototype._makeSrcLink){Link.prototype._makeSrcLink=function(e){return"&lt;"+e+"&gt;"}}IO.mkPath((publish.conf.outDir+"symbols/src").split("/"));Link.symbolSet=c;try{var q=new JSDOC.JsPlate(publish.conf.templatesDir+"class.tmpl");var b=new JSDOC.JsPlate(publish.conf.templatesDir+"allclasses.tmpl")}catch(w){print("Couldn't create the required templates: "+w);quit()}function o(e){return(e.memberOf=="")}function x(e){return(e.is("FILE"))}function n(e){return(e.is("CONSTRUCTOR")||e.isNamespace)}var a=c.toArray();var g=JSDOC.opt.srcFiles;for(var u=0,r=g.length;u<r;u++){var A=g[u];var d=publish.conf.outDir+"symbols/src/";makeSrcFile(A,d)}var y=a.filter(n).sort(makeSortby("alias"));if(JSDOC.opt.u){var p={};Link.filemap={};for(var u=0,r=y.length;u<r;u++){var B=y[u].alias.toLowerCase();if(!p[B]){p[B]=1}else{p[B]++}Link.filemap[y[u].alias]=(p[B]>1)?B+"_"+p[B]:B}}Link.base="../";publish.classesIndex=b.process(y);for(var u=0,r=y.length;u<r;u++){var s=y[u];s.events=s.getEvents();s.methods=s.getMethods();Link.currentSymbol=s;var k="";k=q.process(s);IO.saveFile(publish.conf.outDir+"symbols/",((JSDOC.opt.u)?Link.filemap[s.alias]:s.alias)+publish.conf.ext,k)}Link.base="";publish.classesIndex=b.process(y);try{var z=new JSDOC.JsPlate(publish.conf.templatesDir+"index.tmpl")}catch(w){print(w.message);quit()}var j=z.process(y);IO.saveFile(publish.conf.outDir,"index"+publish.conf.ext,j);z=j=y=null;try{var t=new JSDOC.JsPlate(publish.conf.templatesDir+"allfiles.tmpl")}catch(w){print(w.message);quit()}var m=a.filter(x);var f=[];for(var u=0;u<g.length;u++){f.push(new JSDOC.Symbol(g[u],[],"FILE",new JSDOC.DocComment("/** */")))}for(var u=0;u<m.length;u++){var h=g.indexOf(m[u].alias);f[h]=m[u]}f=f.sort(makeSortby("name"));var v=t.process(f);IO.saveFile(publish.conf.outDir,"files"+publish.conf.ext,v);t=v=g=null}function summarize(a){if(typeof a!="undefined"){return a.match(/([\w\W]+?\.)[^a-z0-9_$]/i)?RegExp.$1:a}}function makeSortby(a){return function(d,c){if(d[a]!=undefined&&c[a]!=undefined){d=d[a].toLowerCase();c=c[a].toLowerCase();if(d<c){return -1}if(d>c){return 1}return 0}}}function include(a){var a=publish.conf.templatesDir+a;return IO.readFile(a)}function makeSrcFile(b,d,a){if(JSDOC.opt.s){return}if(!a){a=b.replace(/\.\.?[\\\/]/g,"").replace(/[\\\/]/g,"_");a=a.replace(/\:/g,"_")}var c={path:b,name:a,charset:IO.encoding,hilited:""};if(defined(JSDOC.PluginManager)){JSDOC.PluginManager.run("onPublishSrc",c)}if(c.hilited){IO.saveFile(d,a+publish.conf.ext,c.hilited)}}function makeSignature(b){if(!b){return"()"}var a="("+b.filter(function(c){return c.name.indexOf(".")==-1}).map(function(c){return c.name}).join(", ")+")";return a}function resolveLinks(a,b){a=a.replace(/\{@link ([^} ]+) ?\}/gi,function(c,d){return new Link().toSymbol(d)});return a};